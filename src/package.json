{
  "name": "serverlesscounter",
  "version": "1.0.0",
  "description": "",
  "license": "MIT",
  "main": "./app.js",
  "scripts": {
    "prepare": "cd .. && husky",
    "format": "yarn base:prettier --write .",
    "format-check": "yarn base:prettier --check .",
    "lint": "eslint .",
    "type-check": "tsc -noEmit",
    "prebuild": "yarn",
    "build": "yarn build:only",
    "build:only": "npx babel . --extensions '.ts,.tsx' --out-dir ../dist",
    "postbuild": "find . -maxdepth 2 -name '*function.json' | xargs -I {} cp {} ../dist/{}; cp host.json .funcignore package.json yarn.lock local.settings.json ../dist; cd ../dist; yarn install --production",
    "prestart": "yarn build",
    "start": "yarn start:only",
    "start:only": "cd ../dist; func start --typescript",
    "test": "jest --verbose",
    "coverage": "jest --coverage",
    "sonar:only": "npx sonarqube-scanner  -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.organization=$SONAR_ORGANIZATION -Dsonar.projectKey=$SONAR_PROJECT_KEY",
    "sonar": "yarn coverage; yarn sonar:only",
    "sonar-server:start": "docker run --name sonarqube-server -p 127.0.0.1:9000:9000 --detach --rm sonarqube:lts-community",
    "sonar-server:start-persistent": "docker run --name sonarqube-server -p 127.0.0.1:9000:9000 --detach --rm --env-file .env.sonar-server.local sonarqube:lts-community",
    "watch:generic": "npx onchange '**/*' --exclude 'dist/**/*' --",
    "watch:format-check": "yarn wg yarn base:prettier --check .",
    "watch:format-check-onlyChanged": "yarn wg yarn base:prettier --check {{changed}}",
    "watch:lint": "yarn wg yarn eslint .",
    "watch:lint-onlyChanged": "yarn wg yarn eslint {{changed}}",
    "watch:type-check": "yarn type-check --watch",
    "watch:build": "yarn build --watch",
    "watch:test": "yarn test --watch",
    "watch:test-onlyChanged": "yarn test --watch --onlyChanged",
    "pre-commit": "yarn type-check && yarn lint && yarn format-check && yarn test && yarn check-commit-blocked-terms",
    "check-commit-blocked-terms": "../.scripts/checkCommitBlockedTerms.sh",
    "node:env": "node ../.scripts/node-env.js",
    "act:run-workflow": "run_workflow () { act --platform ubuntu-latest=node:20-bullseye-slim --container-architecture linux/amd64 --directory ../ --secret-file ./.secrets --workflows ./.github/workflows/$1 --job $2 --quiet ${@:3}; }; run_workflow",
    "act:sonarcloud": "yarn a:r sonarcloud-coverage.yml sonarcloud --container-architecture linux/amd64",
    "act:deploy": "yarn a:r deploy.yml build-and-deploy",
    "act:health-check": "yarn a:r health-check.yml health-check",
    "f": "yarn format",
    "fc": "yarn format-check",
    "l": "yarn lint",
    "tc": "yarn type-check",
    "b": "yarn build",
    "bo": "yarn build:only",
    "s": "yarn start",
    "so": "yarn start:only",
    "t": "yarn test",
    "c": "yarn coverage",
    "sn": "yarn sonar",
    "sno": "yarn sonar:only",
    "ss": "yarn sonar-server:start",
    "ssp": "yarn sonar-server:start-persistent",
    "wg": "yarn watch:generic",
    "wfc": "yarn watch:format-check",
    "wfco": "yarn watch:format-check-onlyChanged",
    "wl": "yarn watch:lint",
    "wlo": "yarn watch:lint-onlyChanged",
    "wtc": "yarn watch:type-check",
    "wb": "yarn watch:build",
    "wt": "yarn watch:test",
    "wto": "yarn watch:test-onlyChanged",
    "pc": "yarn pre-commit",
    "cbt": "yarn check-commit-blocked-terms",
    "ne": "yarn node:env",
    "a:r": "yarn act:run-workflow",
    "a:sc": "yarn act:sonarcloud",
    "a:d": "yarn act:deploy",
    "a:hc": "yarn act:health-check",
    "base:prettier": "yarn prettier --ignore-path .gitignore '!coverage'"
  },
  "dependencies": {
    "@azure/functions": "^4.4.0",
    "mysql2": "^3.9.7",
    "zod": "^3.23.8"
  },
  "devDependencies": {
    "@babel/cli": "^7.24.5",
    "@babel/core": "^7.24.5",
    "@babel/preset-env": "^7.24.5",
    "@babel/preset-typescript": "^7.24.1",
    "@types/better-sqlite3": "^7.6.10",
    "@types/jest": "^29.5.1",
    "@types/node": "20.x",
    "@typescript-eslint/eslint-plugin": "^7.9.0",
    "@typescript-eslint/parser": "^7.9.0",
    "babel-jest": "^29.5.0",
    "babel-plugin-inline-json-import": "^0.3.2",
    "babel-plugin-module-resolver": "^5.0.2",
    "better-sqlite3": "^10.0.0",
    "eslint": "8.57.0",
    "husky": "^9.0.11",
    "jest": "^29.5.0",
    "jest-mock-extended": "^3.0.7",
    "jest-sonar-reporter": "^2.0.0",
    "prettier": "^3.2.5",
    "ts-jest": "^29.1.0",
    "ts-node": "^10.9.1",
    "typescript": "^5.4.5"
  },
  "prettier": {
    "arrowParens": "avoid",
    "bracketSameLine": true,
    "bracketSpacing": false,
    "singleQuote": true,
    "trailingComma": "all"
  },
  "jestSonar": {
    "reportPath": "../test-reports",
    "reportFile": "test-report.xml",
    "indent": 2
  },
  "eslintConfig": {
    "env": {
      "browser": true,
      "es2021": true
    },
    "extends": [
      "eslint:recommended",
      "plugin:@typescript-eslint/recommended"
    ],
    "overrides": [],
    "parser": "@typescript-eslint/parser",
    "parserOptions": {
      "ecmaVersion": "latest",
      "sourceType": "module"
    },
    "plugins": [
      "@typescript-eslint"
    ],
    "rules": {
      "@typescript-eslint/no-unused-vars": "off"
    }
  }
}
